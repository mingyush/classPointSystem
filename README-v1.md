# ç­çº§ç§¯åˆ†ç³»ç»Ÿ V1

ä¸€ä¸ªç®€æ´é«˜æ•ˆçš„å•ç­çº§ç§¯åˆ†ç®¡ç†å·¥å…·ï¼Œæ”¯æŒæœ¬åœ°éƒ¨ç½²å’Œäº‘ç«¯éƒ¨ç½²ä¸¤ç§æ–¹å¼ã€‚

## ðŸš€ å¿«é€Ÿå¼€å§‹

### æœ¬åœ°éƒ¨ç½²
```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨æœåŠ¡
npm start

# è®¿é—®ç³»ç»Ÿ
# æ•™å®¤å¤§å±: http://localhost:3000/display
# ç®¡ç†åŽå°: http://localhost:3000/admin
```

### Cloudflareéƒ¨ç½²
```bash
# å®‰è£…Wrangler CLI
npm install -g wrangler
wrangler login

# åˆ›å»ºD1æ•°æ®åº“
npm run cf:d1:create

# åˆå§‹åŒ–æ•°æ®åº“
npm run cf:d1:init

# éƒ¨ç½²åº”ç”¨
npm run deploy:cf
```

## ðŸ“‹ åŠŸèƒ½ç‰¹æ€§

### ðŸŽ¯ æ ¸å¿ƒåŠŸèƒ½
- **åŒæ¨¡å¼å¤§å±**: å¹³æ—¶æ¨¡å¼æ˜¾ç¤ºæŽ’è¡Œæ¦œï¼Œä¸Šè¯¾æ¨¡å¼æ”¯æŒå¿«é€Ÿç§¯åˆ†æ“ä½œ
- **ç§¯åˆ†ç®¡ç†**: æ”¯æŒåŠ åˆ†ã€å‡åˆ†ã€ç§¯åˆ†æ¸…é›¶ï¼Œå…è®¸è´Ÿæ•°ç§¯åˆ†
- **å­¦ç”ŸæŸ¥è¯¢**: å­¦ç”Ÿå¯é€šè¿‡å­¦å·æŸ¥è¯¢ä¸ªäººç§¯åˆ†å’ŒæŽ’å
- **å•†å“é¢„çº¦**: ç®€åŒ–çš„å•†å“å…‘æ¢é¢„çº¦ç³»ç»Ÿ
- **å¥–æƒ©é¡¹**: é¢„è®¾å¸¸ç”¨å¥–æƒ©é¡¹ï¼Œæ”¯æŒä¸€é”®æ“ä½œ

### ðŸ”§ æŠ€æœ¯ç‰¹æ€§
- **åŒéƒ¨ç½²æ”¯æŒ**: æœ¬åœ°SQLite + äº‘ç«¯Cloudflare D1
- **å®žæ—¶åŒæ­¥**: æ•°æ®å˜æ›´å®žæ—¶æ›´æ–°åˆ°å¤§å±
- **è‡ªåŠ¨åˆ‡æ¢**: ä¸Šè¯¾æ¨¡å¼2å°æ—¶åŽè‡ªåŠ¨åˆ‡æ¢å›žå¹³æ—¶æ¨¡å¼
- **æ•°æ®å®‰å…¨**: å®Œæ•´çš„å¤‡ä»½å’Œæ¢å¤æœºåˆ¶

## ðŸ—ï¸ ç³»ç»Ÿæž¶æž„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æœ¬åœ°éƒ¨ç½²      â”‚   Cloudflareéƒ¨ç½² â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Node.js + Expressâ”‚ Cloudflare Workersâ”‚
â”‚ SQLite æ•°æ®åº“    â”‚ D1 æ•°æ®åº“        â”‚
â”‚ é™æ€æ–‡ä»¶æœåŠ¡     â”‚ Cloudflare Pages â”‚
â”‚ æœ¬åœ°å­˜å‚¨        â”‚ å…¨çƒCDN         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ“± ç•Œé¢è¯´æ˜Ž

### æ•™å®¤å¤§å± (`/display`)
- **å¹³æ—¶æ¨¡å¼**: æ˜¾ç¤ºç§¯åˆ†æŽ’è¡Œæ¦œï¼Œåº•éƒ¨æä¾›å­¦ç”ŸæŸ¥è¯¢å…¥å£
- **ä¸Šè¯¾æ¨¡å¼**: æ˜¾ç¤ºå­¦ç”Ÿåˆ—è¡¨å’Œå¥–æƒ©é¡¹æŒ‰é’®ï¼Œæ”¯æŒå¿«é€Ÿç§¯åˆ†æ“ä½œ

### ç®¡ç†åŽå° (`/admin`)
- **å­¦ç”Ÿç®¡ç†**: æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤å­¦ç”Ÿä¿¡æ¯
- **ç§¯åˆ†ç®¡ç†**: æŸ¥çœ‹ç§¯åˆ†è®°å½•ï¼Œæ‰‹åŠ¨è°ƒæ•´ç§¯åˆ†ï¼Œç§¯åˆ†æ¸…é›¶
- **å•†å“ç®¡ç†**: ç®¡ç†å¥–å“å•†å“ï¼Œè®¾ç½®ä»·æ ¼å’Œåº“å­˜
- **é¢„çº¦ç®¡ç†**: å¤„ç†å­¦ç”Ÿé¢„çº¦ï¼Œç¡®è®¤å…‘æ¢
- **å¥–æƒ©é¡¹ç®¡ç†**: è®¾ç½®å¸¸ç”¨å¥–æƒ©é¡¹ä¾›å¤§å±ä½¿ç”¨

## ðŸ” æƒé™è¯´æ˜Ž

- **ç­ä¸»ä»»**: æ‹¥æœ‰æ‰€æœ‰åŠŸèƒ½æƒé™
- **ä»»è¯¾è€å¸ˆ**: åªèƒ½æ“ä½œç§¯åˆ†ç›¸å…³åŠŸèƒ½
- **å­¦ç”Ÿ**: åªèƒ½æŸ¥è¯¢ä¸ªäººç§¯åˆ†ä¿¡æ¯

## ðŸ“Š æ•°æ®å­˜å‚¨

### SQLite (æœ¬åœ°éƒ¨ç½²)
- æ•°æ®åº“æ–‡ä»¶: `./data/classroom_points.db`
- è‡ªåŠ¨å¤‡ä»½: æ¯æ—¥å‡Œæ™¨2ç‚¹
- æ”¯æŒWALæ¨¡å¼ï¼Œæé«˜å¹¶å‘æ€§èƒ½

### Cloudflare D1 (äº‘ç«¯éƒ¨ç½²)
- å…¨çƒåˆ†å¸ƒå¼æ•°æ®åº“
- è‡ªåŠ¨å¤‡ä»½å’Œæ¢å¤
- é›¶è¿ç»´æˆæœ¬

## ðŸ”„ æ•°æ®è¿ç§»

### ä»ŽçŽ°æœ‰JSONæ–‡ä»¶è¿ç§»
```bash
npm run migrate:json-to-sqlite
```

### SQLiteä¸ŽD1äº’ç›¸è¿ç§»
```bash
# SQLiteå¯¼å‡º
sqlite3 ./data/classroom_points.db .dump > export.sql

# D1å¯¼å…¥
wrangler d1 execute classroom-points-v1 --file=export.sql

# D1å¯¼å‡º
wrangler d1 export classroom-points-v1 --output=export.sql

# SQLiteå¯¼å…¥
sqlite3 ./data/classroom_points.db < export.sql
```

## ðŸ› ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æž„
```
â”œâ”€â”€ adapters/           # æ•°æ®åº“é€‚é…å™¨
â”œâ”€â”€ api/               # APIè·¯ç”±
â”œâ”€â”€ services/          # ä¸šåŠ¡é€»è¾‘æœåŠ¡
â”œâ”€â”€ middleware/        # ä¸­é—´ä»¶
â”œâ”€â”€ public/            # é™æ€æ–‡ä»¶
â”œâ”€â”€ sql/               # æ•°æ®åº“è„šæœ¬
â”œâ”€â”€ src/               # Cloudflare Workersæºç 
â””â”€â”€ scripts/           # å·¥å…·è„šæœ¬
```

### æ·»åŠ æ–°åŠŸèƒ½
1. åœ¨ `adapters/` ä¸­å®šä¹‰æ•°æ®è®¿é—®æŽ¥å£
2. åœ¨ `services/` ä¸­å®žçŽ°ä¸šåŠ¡é€»è¾‘
3. åœ¨ `api/` ä¸­æ·»åŠ APIè·¯ç”±
4. åœ¨ `public/` ä¸­æ›´æ–°å‰ç«¯ç•Œé¢

### è¿è¡Œæµ‹è¯•
```bash
npm test
```

## ðŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### æœ¬åœ°éƒ¨ç½²ä¼˜åŒ–
- SQLite WALæ¨¡å¼ï¼ˆé»˜è®¤å¯ç”¨ï¼‰
- å®šæœŸæ¸…ç†åŽ†å²æ•°æ®
- åˆç†çš„ç´¢å¼•è®¾è®¡

### Cloudflareéƒ¨ç½²ä¼˜åŒ–
- å…¨çƒCDNåŠ é€Ÿ
- è¾¹ç¼˜è®¡ç®—ä¼˜åŠ¿
- è‡ªåŠ¨æ‰©å±•èƒ½åŠ›

## ðŸ” æ•…éšœæŽ’é™¤

### å¸¸è§é—®é¢˜
1. **æ•°æ®åº“è¿žæŽ¥å¤±è´¥**: æ£€æŸ¥æ–‡ä»¶æƒé™å’Œè·¯å¾„
2. **ç«¯å£å ç”¨**: ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ç«¯å£è®¾ç½®
3. **é™æ€æ–‡ä»¶404**: æ£€æŸ¥publicç›®å½•å’Œè·¯ç”±é…ç½®

### æ—¥å¿—æŸ¥çœ‹
```bash
# æœ¬åœ°éƒ¨ç½²
tail -f logs/combined.log

# Cloudflareéƒ¨ç½²
wrangler tail
```

## ðŸ“ž æŠ€æœ¯æ”¯æŒ

- æŸ¥çœ‹ [éƒ¨ç½²æŒ‡å—](docs/deployment-v1.md)
- æŸ¥çœ‹ [APIæ–‡æ¡£](docs/api.md)
- æäº¤ [Issue](https://github.com/your-repo/issues)

## ðŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

**ç­çº§ç§¯åˆ†ç³»ç»Ÿ V1** - è®©ç§¯åˆ†ç®¡ç†æ›´ç®€å•é«˜æ•ˆ ðŸŽ“