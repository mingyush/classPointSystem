// 压缩版通用工具函数 - 生产环境使用
async function apiRequest(e,t={}){try{const n=await fetch(e,{headers:{"Content-Type":"application/json",...t.headers},...t}),o=await n.json();if(!n.ok)throw new Error(o.message||"请求失败");return o}catch(n){throw console.error("API请求错误:",n),showMessage(n.message||"网络请求失败","error"),n}}function showMessage(e,t="info"){const n=document.createElement("div");n.className=`message message-${t}`,n.textContent=e,n.style.cssText="position:fixed;top:20px;right:20px;padding:15px 20px;border-radius:5px;color:white;font-weight:bold;z-index:1000;animation:slideIn 0.3s ease;";switch(t){case"success":n.style.backgroundColor="#28a745";break;case"error":n.style.backgroundColor="#dc3545";break;case"warning":n.style.backgroundColor="#ffc107",n.style.color="#212529";break;default:n.style.backgroundColor="#007bff"}document.body.appendChild(n),setTimeout(()=>{n.style.animation="slideOut 0.3s ease",setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n)},300)},3e3)}document.querySelector("#messageAnimations")||((e=>{const t=document.createElement("style");t.id="messageAnimations",t.textContent="@keyframes slideIn{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}@keyframes slideOut{from{transform:translateX(0);opacity:1}to{transform:translateX(100%);opacity:0}}",document.head.appendChild(t)})());function formatDate(e){return new Date(e).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function formatPoints(e){return e>=0?`+${e}`:`${e}`}function debounce(e,t){let n;return function(...o){clearTimeout(n),n=setTimeout(()=>e(...o),t)}}function throttle(e,t){let n;return function(){const o=arguments,r=this;n||(e.apply(r,o),n=!0,setTimeout(()=>n=!1,t))}}const storage={set(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(n){console.error("存储数据失败:",n)}},get(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.error("读取数据失败:",t),null}},remove(e){try{localStorage.removeItem(e)}catch(t){console.error("删除数据失败:",t)}}};document.addEventListener("DOMContentLoaded",function(){console.log("页面加载完成")});