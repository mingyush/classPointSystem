<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>菜单系统演示 - 班级积分管理系统</title>
    <link rel="stylesheet" href="/css/common.css">
    <link rel="stylesheet" href="/css/menu.css">
    <style>
        .demo-container {
            padding: 100px 40px 40px 40px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .demo-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        
        .demo-section h2 {
            margin: 0 0 20px 0;
            color: #2c3e50;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .feature-item {
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }
        
        .feature-item h4 {
            margin: 0 0 10px 0;
            color: #667eea;
        }
        
        .feature-item p {
            margin: 0;
            color: #6c757d;
            font-size: 0.9em;
        }
        
        .demo-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        
        .demo-btn {
            padding: 10px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .demo-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }
        
        .demo-btn.secondary {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }
        
        .demo-btn.danger {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
        }
        
        .status-indicator {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 600;
            margin-left: 10px;
        }
        
        .status-indicator.online {
            background: #d4edda;
            color: #155724;
        }
        
        .status-indicator.offline {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <div class="demo-section">
            <h2>🎯 专业菜单系统演示</h2>
            <p>点击左上角的菜单按钮体验现代化的导航系统，或使用快捷键 <code>Ctrl+M</code> 快速打开菜单。</p>
            
            <div class="feature-grid">
                <div class="feature-item">
                    <h4>🎨 现代化设计</h4>
                    <p>采用渐变色彩、圆角设计和流畅动画，提供专业的视觉体验</p>
                </div>
                <div class="feature-item">
                    <h4>⚡ 快速导航</h4>
                    <p>一键访问所有功能模块，支持键盘快捷键操作</p>
                </div>
                <div class="feature-item">
                    <h4>👤 智能用户信息</h4>
                    <p>自动识别登录状态，显示用户信息和快速退出功能</p>
                </div>
                <div class="feature-item">
                    <h4>📱 响应式设计</h4>
                    <p>完美适配各种屏幕尺寸，移动端友好</p>
                </div>
            </div>
        </div>
        
        <div class="demo-section">
            <h2>🔧 功能测试</h2>
            <p>测试菜单系统的各项功能和用户状态管理。</p>
            
            <div class="demo-buttons">
                <button class="demo-btn" onclick="testTeacherLogin()">模拟教师登录</button>
                <button class="demo-btn" onclick="testStudentLogin()">模拟学生登录</button>
                <button class="demo-btn secondary" onclick="updateMenuInfo()">更新菜单信息</button>
                <button class="demo-btn danger" onclick="clearAllData()">清除所有数据</button>
            </div>
            
            <div id="statusDisplay" style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                <strong>当前状态:</strong> <span id="currentStatus">检查中...</span>
            </div>
        </div>
        
        <div class="demo-section">
            <h2>⌨️ 快捷键说明</h2>
            <div class="feature-grid">
                <div class="feature-item">
                    <h4>Ctrl + M</h4>
                    <p>打开/关闭菜单</p>
                </div>
                <div class="feature-item">
                    <h4>Escape</h4>
                    <p>关闭菜单</p>
                </div>
                <div class="feature-item">
                    <h4>点击菜单项</h4>
                    <p>自动关闭菜单并导航</p>
                </div>
                <div class="feature-item">
                    <h4>点击覆盖层</h4>
                    <p>关闭菜单</p>
                </div>
            </div>
        </div>
        
        <div class="demo-section">
            <h2>🎯 设计特点</h2>
            <ul style="line-height: 2; color: #6c757d;">
                <li>✨ <strong>流畅动画:</strong> 使用 cubic-bezier 缓动函数，提供自然的动画效果</li>
                <li>🎨 <strong>渐变设计:</strong> 现代化的渐变色彩搭配，提升视觉层次</li>
                <li>🔍 <strong>状态反馈:</strong> 清晰的悬停、激活和焦点状态</li>
                <li>♿ <strong>无障碍支持:</strong> 完整的键盘导航和屏幕阅读器支持</li>
                <li>📐 <strong>一致性:</strong> 统一的设计语言和交互模式</li>
                <li>⚡ <strong>性能优化:</strong> 硬件加速动画，支持减少动画偏好</li>
            </ul>
        </div>
    </div>

    <script src="/js/common.js"></script>
    <script src="/js/menu.js"></script>
    <script>
        // 测试教师登录
        function testTeacherLogin() {
            const teacherData = {
                id: '8001',
                name: '张老师',
                userType: 'teacher'
            };
            
            storage.set('teacherToken', 'demo-teacher-token-' + Date.now());
            storage.set('currentTeacher', teacherData);
            
            if (window.menuSystem) {
                window.menuSystem.updateUserInfo();
            }
            
            updateStatus();
            showMessage('教师登录模拟成功', 'success');
        }
        
        // 测试学生登录
        function testStudentLogin() {
            const studentData = {
                id: '0501',
                name: '张三',
                balance: 85
            };
            
            storage.set('currentStudent', studentData);
            
            if (window.menuSystem) {
                window.menuSystem.updateUserInfo();
            }
            
            updateStatus();
            showMessage('学生登录模拟成功', 'success');
        }
        
        // 更新菜单信息
        function updateMenuInfo() {
            if (window.menuSystem) {
                window.menuSystem.updateUserInfo();
                window.menuSystem.updateMenuItems();
            }
            updateStatus();
            showMessage('菜单信息已更新', 'info');
        }
        
        // 清除所有数据
        function clearAllData() {
            if (confirm('确定要清除所有测试数据吗？')) {
                storage.remove('teacherToken');
                storage.remove('currentTeacher');
                storage.remove('currentStudent');
                
                if (window.menuSystem) {
                    window.menuSystem.updateUserInfo();
                }
                
                updateStatus();
                showMessage('所有数据已清除', 'warning');
            }
        }
        
        // 更新状态显示
        function updateStatus() {
            const statusSpan = document.getElementById('currentStatus');
            const teacherToken = storage.get('teacherToken');
            const currentTeacher = storage.get('currentTeacher');
            const currentStudent = storage.get('currentStudent');
            
            let statusText = '';
            let statusClass = 'offline';
            
            if (teacherToken && currentTeacher) {
                statusText = `教师已登录 - ${currentTeacher.name} (${currentTeacher.id})`;
                statusClass = 'online';
            } else if (currentStudent) {
                statusText = `学生已登录 - ${currentStudent.name} (${currentStudent.id}) - ${currentStudent.balance}分`;
                statusClass = 'online';
            } else {
                statusText = '未登录';
                statusClass = 'offline';
            }
            
            statusSpan.innerHTML = statusText + `<span class="status-indicator ${statusClass}">${statusClass === 'online' ? '在线' : '离线'}</span>`;
        }
        
        // 页面加载时更新状态
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(updateStatus, 500);
        });
    </script>
</body>
</html>